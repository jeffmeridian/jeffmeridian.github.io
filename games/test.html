<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salt-Writ Shakedown | Story Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Inter:wght@400;600;800&display=swap');

        :root {
            --sea-dark: #0f172a;
            --rust: #ea580c;
            --salt: #f8fafc;
            --ocean: #0369a1;
            --deep-water: #0c4a6e;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--sea-dark);
            color: var(--salt);
            background-image: radial-gradient(circle at 2px 2px, rgba(255, 255, 255, 0.05) 1px, transparent 0);
            background-size: 40px 40px;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .glass {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rust-border {
            border-left: 4px solid var(--rust);
        }

        .ocean-border {
            border-left: 4px solid var(--ocean);
        }

        .chapter-card:hover {
            transform: translateX(10px);
            border-color: var(--rust);
            transition: all 0.3s ease;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--sea-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--ocean);
            border-radius: 10px;
        }
    </style>
</head>

<body class="p-4 md:p-8">

    <div id="app" class="max-w-7xl mx-auto space-y-8">
        <!-- Header -->
        <header
            class="border-b border-white/10 pb-6 flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
            <div>
                <div class="flex items-center gap-3 text-orange-500 mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" />
                    </svg>
                    <span class="mono text-xs uppercase tracking-widest font-bold">Project Archive</span>
                </div>
                <h1 class="text-4xl md:text-6xl font-extrabold tracking-tighter" id="title"></h1>
                <p class="text-slate-400 mt-2 max-w-2xl text-lg italic" id="logline"></p>
            </div>
            <div class="text-right glass p-4 rounded-lg">
                <div class="text-xs uppercase text-slate-500 font-bold mb-1">Genre & Pacing</div>
                <div id="genre" class="text-sm font-semibold"></div>
                <div id="pacing" class="text-xs text-orange-400 mt-1 italic"></div>
            </div>
        </header>

        <!-- Global Directive -->
        <section class="glass p-6 rounded-xl relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4 opacity-10">
                <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M12 2v20M2 12h20" />
                    <path d="m16.2 7.8-8.4 8.4M7.8 7.8l8.4 8.4" />
                </svg>
            </div>
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                <span class="p-1 bg-white/10 rounded">01</span> Global System Directive
            </h2>
            <p id="global-directive"
                class="text-slate-300 leading-relaxed text-lg first-letter:text-4xl first-letter:font-bold first-letter:mr-1">
            </p>
        </section>

        <!-- The Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Left: Structural & Heat Protocols -->
            <div class="lg:col-span-1 space-y-6">
                <div class="glass p-6 rounded-xl space-y-6">
                    <h3 class="text-orange-500 mono text-sm font-bold uppercase tracking-widest">Structural Specs</h3>

                    <!-- Ratio Visualizer -->
                    <div id="ratios" class="space-y-6">
                        <!-- Dynamic content here -->
                    </div>

                    <div class="pt-4 border-t border-white/10">
                        <h4 class="text-sm font-bold mb-2">The Rule of Rust</h4>
                        <p id="rule-of-rust" class="text-sm text-slate-400 italic"></p>
                    </div>
                </div>

                <div class="glass p-6 rounded-xl space-y-4">
                    <h3 class="text-blue-400 mono text-sm font-bold uppercase tracking-widest">Internal Pulse</h3>
                    <p id="internal-pulse" class="text-sm text-slate-300"></p>
                    <div class="bg-blue-900/20 p-3 rounded text-xs border border-blue-500/30 text-blue-200"
                        id="humanization-note"></div>
                </div>

                <!-- Banned Words -->
                <div class="glass p-6 rounded-xl">
                    <h3 class="text-red-500 mono text-sm font-bold uppercase tracking-widest mb-4">Prohibited Vocabulary
                    </h3>
                    <div id="banned-words" class="flex flex-wrap gap-2"></div>
                </div>
            </div>

            <!-- Right: Characters and Chapter Timeline -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Character Profiles -->
                <div id="characters" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Dynamic chars here -->
                </div>

                <!-- Plot Track -->
                <div class="space-y-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <span class="p-1 bg-white/10 rounded">02</span> The Salt-Writ Sequence
                    </h3>
                    <div id="plot-timeline"
                        class="space-y-4 relative before:absolute before:left-4 before:top-0 before:bottom-0 before:w-px before:bg-white/10">
                        <!-- Chapters rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-20 py-10 border-t border-white/10 text-center text-slate-500 text-xs mono uppercase">
            System Protocol Active: API-WorldBuilder-JSONArchitect-v1 | <span id="timestamp"></span>
        </footer>
    </div>

    <script>
        const data = {
            "project_metadata": {
                "project_name": "Salt-Writ Shakedown",
                "model": "API-WorldBuilder-JSONArchitect-v1",
                "genre": "Maritime caper thriller (near-future, analog tech)",
                "logline": "A disgraced hydrographer and a brass-souled tug captain race a privatized coast-guard syndicate to recover a stolen “salt ledger” that can reroute entire shipping lanes—and drown a city if misused.",
                "pacing_style": "Fast-cut scenes with hard turns, short breath pauses, and escalating constraints per chapter"
            },
            "global_system_directive": "This story follows Inez Marr, a hydrographer kicked out of the national chart office, as she’s pulled into a dockside chase for a stolen salt ledger—an outlaw map-credential etched by tidal chemists that can legally and physically redirect cargo traffic. When a privatized maritime security outfit led by Dax Kestrel seizes the ledger to extort ports and force a dangerous channel change, Inez teams up with tug captain Rourke Pal and salvage diver Junie Sato to steal it back. The hunt runs through fogbound breakwaters, floating data buoys, and a decommissioned lightship where the ledger’s final index is hidden. Inez must decide whether to expose the entire corrupt permitting system or use the ledger herself to prevent a catastrophic storm-surge funneling into her home harbor, culminating in a night run through razor shoals where every choice leaves a mark on the coastline and on her name.",
            "structural_directives": {
                "pulp_density_protocol": {
                    "narrative_ratio": "25% Dialogue / 55% Action / 20% Interiority",
                    "linguistic_meter": "Short clauses during pursuit; longer, technical sentences only when a decision hinges on a measurement or a hazard.",
                    "the_rule_of_rust": "Every set-piece must include one failing tool, corroded fitting, or improvised repair that changes the plan; show the fix, the cost, and the new risk created."
                },
                "heat_index_protocol": {
                    "narrative_ratio": "35% Dialogue / 40% Action / 25% Interiority",
                    "the_chemistry_rhythm": "Friction through competence: attraction grows when someone proves skill."
                },
                "the_internal_pulse": "Inez’s narration runs on measurement-as-emotion: depth soundings, salinity gradients, and current vectors stand in for fear, regret, and desire.",
            },
            "humanization_protocol": {
                "emotional_suppression": "Keep feelings compact and embodied: hands cramp on wet rope, throat tastes like diesel.",
                "banned_word_list": ["tapestry", "embark", "delve", "symphony", "beacon", "whisper", "echo", "unravel", "labyrinth", "serendipity", "ancient", "destiny", "realm", "intertwined", "resonate", "cascade"],
            },
            "character_profiles": {
                "protagonist_narrator": {
                    "name": "Inez Marr",
                    "role": "Hydrographer",
                    "voice": "Knife-clean, technical, dry dock humor.",
                    "super_power": "Reads water like handwriting."
                },
                "Antagonist": {
                    "name": "Dax Kestrel",
                    "role": "Corporate Executive",
                    "voice": "Polished maritime-law with a sneer.",
                    "super_power": "Weaponizes bureaucracy."
                },
                "Deuteragonist": {
                    "name": "Rourke Pal",
                    "role": "Tug Captain",
                    "voice": "Blunt, salt-stained pragmatist.",
                    "super_power": "Tug intuition (line strain)."
                },
                "Tritagonist": {
                    "name": "Junie Sato",
                    "role": "Salvage Diver",
                    "voice": "Quick, bright, and exacting.",
                    "super_power": "Salvage memory (accident patterns)."
                }
            },
            "chapters": [
                { "ch": "1", "title": "The Buoy That Lied", "synopsis": "Inez Marr finds a government buoy transmitting a false depth profile. She snatches a waterproof chart tube—the stolen salt ledger index—while being framed for sabotage.", "stop": "Kestrel names her as the saboteur over the emergency frequency while spotlights lock onto her skiff." },
                { "ch": "2", "title": "Towline Politics", "synopsis": "Rourke drags Inez’s skiff through barges to escape. They triangulate the strip’s missing section to a decommissioned lightship used as a private archive.", "stop": "A patrol drone drops a magnetic tracker on the towline. If Rourke cuts it, they lose the skiff; if he keeps it, they are followed." },
                { "ch": "3", "title": "Lightship Archive Heist", "synopsis": "They board the rusting lightship. They find 'salt writs'—legal docs that can force barrier gates to open. Kestrel arrives with a notarized seizure order.", "stop": "Kestrel offers Inez a deal: sign a confession to save her father’s home pier. Rourke watches her hand hover over the pen." },
                { "ch": "4", "title": "Set and Drift", "synopsis": "A chase through narrow corridors. Junie gets hurt. Inez finds the ledger bolts under a bench. She realizes Kestrel can command barrier gates to open for 'pressure relief' at dawn.", "stop": "Inez reveals the hidden clause: the coming storm will be funneled directly into her home harbor." },
                { "ch": "5", "title": "Razor Shoals Run", "synopsis": "A race to the barrier control station through a dangerous back channel. To stop Kestrel, Inez must upload proof—but doing so exposes her own past data tampering.", "stop": "Inez starts the upload. A warning flashes: publishing the truth will trigger her own automatic arrest." },
                { "ch": "6", "title": "Salt Writ, Paid in Full", "synopsis": "Inez chooses the harbor over her name. The storm surge is contained. Junie’s footage sinks Kestrel’s career. The audit reinstates integrity, but Inez is detained.", "stop": "Out on bond, Inez receives a new ceramic strip in the mail—the scheme is global, and she's now the target." }
            ]
        };

        // Initialize UI
        document.getElementById('title').textContent = data.project_metadata.project_name;
        document.getElementById('logline').textContent = data.project_metadata.logline;
        document.getElementById('genre').textContent = data.project_metadata.genre;
        document.getElementById('pacing').textContent = data.project_metadata.pacing_style;
        document.getElementById('global-directive').textContent = data.global_system_directive;
        document.getElementById('rule-of-rust').textContent = data.structural_directives.pulp_density_protocol.the_rule_of_rust;
        document.getElementById('internal-pulse').textContent = data.structural_directives.the_internal_pulse;
        document.getElementById('humanization-note').textContent = data.humanization_protocol.emotional_suppression;
        document.getElementById('timestamp').textContent = new Date().toLocaleString();

        // Render Ratios
        const ratiosContainer = document.getElementById('ratios');
        const renderRatio = (title, ratioStr, color) => {
            const parts = ratioStr.split(' / ').map(p => {
                const [val, label] = p.split('% ');
                return { val: parseInt(val), label };
            });

            const html = `
                <div class="space-y-2">
                    <div class="flex justify-between text-xs font-bold uppercase opacity-60">
                        <span>${title}</span>
                    </div>
                    <div class="h-3 w-full bg-white/5 rounded-full overflow-hidden flex">
                        <div style="width: ${parts[0].val}%" class="bg-blue-500 h-full border-r border-black/20" title="${parts[0].label}: ${parts[0].val}%"></div>
                        <div style="width: ${parts[1].val}%" class="bg-orange-500 h-full border-r border-black/20" title="${parts[1].label}: ${parts[1].val}%"></div>
                        <div style="width: ${parts[2].val}%" class="bg-emerald-500 h-full" title="${parts[2].label}: ${parts[2].val}%"></div>
                    </div>
                    <div class="flex gap-4 text-[10px] mono uppercase opacity-80">
                        <span class="flex items-center gap-1"><div class="w-2 h-2 bg-blue-500"></div> ${parts[0].label}</span>
                        <span class="flex items-center gap-1"><div class="w-2 h-2 bg-orange-500"></div> ${parts[1].label}</span>
                        <span class="flex items-center gap-1"><div class="w-2 h-2 bg-emerald-500"></div> ${parts[2].label}</span>
                    </div>
                </div>
            `;
            ratiosContainer.innerHTML += html;
        };

        renderRatio("Pulp Density Protocol", data.structural_directives.pulp_density_protocol.narrative_ratio);
        renderRatio("Heat Index Protocol", data.structural_directives.heat_index_protocol.narrative_ratio);

        // Banned Words
        const bannedContainer = document.getElementById('banned-words');
        data.humanization_protocol.banned_word_list.forEach(word => {
            const span = document.createElement('span');
            span.className = 'px-2 py-1 bg-red-950/30 text-red-400 border border-red-900/50 rounded text-[10px] mono uppercase';
            span.textContent = word;
            bannedContainer.appendChild(span);
        });

        // Characters
        const charContainer = document.getElementById('characters');
        Object.entries(data.character_profiles).forEach(([key, char]) => {
            const isProtagonist = key === 'protagonist_narrator';
            const html = `
                <div class="glass p-4 rounded-xl ${isProtagonist ? 'rust-border' : 'ocean-border'}">
                    <div class="text-[10px] mono text-slate-500 mb-1 uppercase">${key.replace('_', ' ')}</div>
                    <div class="text-lg font-bold text-white">${char.name}</div>
                    <div class="text-xs text-orange-400 font-bold mb-2">${char.role || 'Key Figure'}</div>
                    <div class="text-xs text-slate-300 leading-relaxed mb-3">"${char.voice}"</div>
                    <div class="bg-white/5 p-2 rounded text-[11px] border border-white/10 italic">
                        <span class="text-blue-400 font-bold uppercase mr-1">Signature:</span> ${char.super_power}
                    </div>
                </div>
            `;
            charContainer.innerHTML += html;
        });

        // Chapters
        const chapterContainer = document.getElementById('plot-timeline');
        data.chapters.forEach(ch => {
            const html = `
                <div class="chapter-card relative pl-10 pb-8 last:pb-0">
                    <div class="absolute left-2.5 top-0 w-3 h-3 bg-orange-500 rounded-full border-2 border-sea-dark z-10"></div>
                    <div class="glass p-5 rounded-xl border-l-0">
                        <div class="flex justify-between items-center mb-2">
                            <span class="mono text-xs text-orange-500 font-bold">CHAPTER ${ch.ch}</span>
                            <span class="text-xs text-slate-500">Constraint: Active</span>
                        </div>
                        <h4 class="text-xl font-bold mb-2 text-white uppercase tracking-tight">${ch.title}</h4>
                        <p class="text-slate-400 text-sm leading-relaxed mb-4">${ch.synopsis}</p>
                        <div class="bg-red-500/10 border-l-2 border-red-500 p-3 rounded-r">
                            <div class="text-[10px] mono font-bold text-red-400 uppercase mb-1 flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>
                                Irreversible Decision / Stop
                            </div>
                            <p class="text-sm text-red-100 italic">"${ch.stop}"</p>
                        </div>
                    </div>
                </div>
            `;
            chapterContainer.innerHTML += html;
        });
    </script>
</body>

</html>